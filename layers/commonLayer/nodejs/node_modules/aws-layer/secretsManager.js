const AWS = require('aws-sdk')
const REGION = process.env.AWSRegion
const secretManager = new AWS.SecretsManager({
  region: REGION
})

exports.retrieveSecrets = async (secretName) => {
  const secret = await secretManager.getSecretValue({ SecretId: secretName }).promise()
  return {
    key: JSON.parse(secret.SecretString).apiKey,
    secret: JSON.parse(secret.SecretString).Secret
  }
}

exports.retrieveLerexLiveSecret = async (secretName) => {
  let secret = await secretManager.getSecretValue({ SecretId: secretName }).promise()
  secret = JSON.parse(secret.SecretString)
  return {
    key: Object.keys(secret)[0],
    secret: Object.values(secret)[0] 
  }
}
